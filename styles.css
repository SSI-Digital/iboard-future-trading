/* Mobile Futures Trading UI */
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
html,body { margin:0; padding:0; font-family: system-ui,-apple-system,Roboto,Helvetica,Arial,sans-serif; background:#ffffff; color:#1d232e; }
body { min-height:100vh; display:flex; justify-content:center; align-items:flex-start; padding:24px 20px; overflow:auto; }
/* Light theme (default) */
:root {
  --green:#16a34a;
  --green-glow:#16a34a22;
  --red:#dc2626;
  --red-glow:#dc262622;
  --yellow:#d97706;
  --chart-accent:#6F6ADE; /* per requested purple line color */
  --bg:#ffffff;        /* primary background now pure white */
  --bg-alt:#ffffff;    /* secondary surfaces also white */
  --bg-soft:#ffffff;   /* soft/background elements unified to white */
  --border:#d9e1ea;
  --border-strong:#c5cfd9;
  --text:#1d232e;
  --text-dim:#677589;
  --text-extra:#9aa4b1;
  --radius:12px;
  font-size:15px;
}

/* Dark theme (optional) */
body.theme-dark {
  --green:#16c784;
  --green-glow:#16c78433;
  --red:#ea3943;
  --red-glow:#ea394333;
  --yellow:#f0b90b;
  --bg:#0f1115;
  --bg-alt:#161a23;
  --bg-soft:#1f242e;
  --border:#262b35;
  --border-strong:#323b46;
  --text:#e6e7e9;
  --text-dim:#8b93a1;
  --text-extra:#5f6672;
  background:var(--bg);
  color:var(--text);
}

::-webkit-scrollbar { width:4px; }
::-webkit-scrollbar-thumb { background:#2c313c; border-radius:2px; }

.app-bar { position:sticky; top:0; z-index:40; display:flex; justify-content:space-between; align-items:center; padding:6px 14px 6px 12px; background:linear-gradient(to bottom,#ffffff,#f7f9fb); border:none; box-shadow:0 1px 0 rgba(0,0,0,0.05); }
.symbol-group { display:flex; gap:10px; align-items:center; }
.symbol-info { line-height:1.1; }
.symbol { font-weight:600; color:var(--text); }
.badge { font-size:0.72rem; padding:2px 6px; border-radius:999px; margin-left:4px; }
.badge.up { background:var(--green-glow); color:var(--green); }
.badge.down { background:var(--red-glow); color:var(--red); }
.icon-btn { background:none; border:none; color:var(--text-dim); font-size:1.1rem; cursor:pointer; padding:4px; border-radius:8px; }
.icon-btn:active { background:var(--bg-soft); }

.app-wrapper { width:100%; display:flex; justify-content:center; }
.app-phone { position:relative; width:414px; max-width:100%; height:844px; max-height:90dvh; background:var(--bg); border:1px solid var(--border); border-radius:38px; overflow:hidden; box-shadow:0 20px 40px -12px rgba(31,45,61,.25),0 4px 12px rgba(0,0,0,.08); display:flex; flex-direction:column; }
.device-notch { position:absolute; top:10px; left:50%; transform:translateX(-50%); width:130px; height:24px; background:#000; border-radius:14px; opacity:.1; pointer-events:none; }
.screen { flex:1; display:flex; flex-direction:column; padding-bottom:64px; overflow-y:auto; overscroll-behavior:contain; }
.screen::-webkit-scrollbar { width:6px; }
.screen::-webkit-scrollbar-thumb { background:var(--border); border-radius:3px; }
.chart-section { padding:4px 10px 0; }
.timeframes { display:flex; overflow-x:auto; gap:6px; padding:4px 0 6px; }
.tf { background:#1b1f27; color:#b1b7c4; border:none; padding:4px 10px; border-radius:20px; font-size:0.75rem; cursor:pointer; white-space:nowrap; }
.tf.active { background:var(--green); color:#fff; }

.chart-placeholder { position:relative; background:transparent; border:none; border-radius:var(--radius); padding:4px 8px 32px; min-height:150px; }
.chart-placeholder canvas { width:100%; height:150px; display:block; }
.price-ticker { position:absolute; bottom:4px; left:8px; right:8px; justify-content:space-between; font-size:0.7rem; color:var(--text-dim); }
/* removed last-price (giá hiển thị trên chart) theo yêu cầu */
.ticker-stats { display:flex; gap:10px; align-items:flex-end; }
.ticker-stats span { white-space:nowrap; }

/* Long / Short ratio bar */
.long-short-wrapper { padding:6px 10px 0; }
.ls-bar { position:relative; width:100%; display:flex; border-radius:26px; overflow:hidden; font-size:0.7rem; font-weight:500; user-select:none; --longRatio:50; }
.ls-seg { position:relative; display:flex; align-items:center; white-space:nowrap; padding:6px 14px; line-height:1; transition:width .45s ease; z-index:1; }
.ls-seg.long { background:rgba(22,167,120,0.12); color:#1a6f55; justify-content:flex-start; text-align:left; }
.ls-seg.short { background:rgba(234,73,80,0.12); color:#a03434; justify-content:flex-end; text-align:right; }
.ls-bar .long { border-top-left-radius:26px; border-bottom-left-radius:26px; }
.ls-bar .short { border-top-right-radius:26px; border-bottom-right-radius:26px; }
/* central white separator band (solid white, no tint bleed) */
/* central white gap with two diagonal edges */
/* narrower, steeper, reversed diagonals */
/* central white gap: parallelogram with both diagonals same direction (down-left), steeper & narrower */
.ls-bar::before { content:''; position:absolute; top:0; bottom:0; left:calc(var(--longRatio)*1% - 4px); width:8px; background:#ffffff; pointer-events:none; z-index:2; box-shadow:0 0 0 1px rgba(0,0,0,0.02),0 0 2px rgba(0,0,0,0.05); clip-path:polygon(40% 0,100% 0,60% 100%,0 100%); }
.ls-seg span { position:relative; z-index:3; }

.trade-section { flex:1; display:flex; flex-direction:column; padding:4px 10px 80px; gap:14px; }
.book-and-form { display:flex; gap:0; background:var(--bg-alt); border-radius:var(--radius); padding:6px 6px 8px; }
.order-book { flex:1; min-width:46%; background:transparent; border:none; border-radius:0; padding:4px 6px 4px; font-size:0.72rem; display:flex; flex-direction:column; max-height:420px; }
.book-header { display:grid; grid-template-columns:1fr 1fr; padding:2px 4px 4px; font-size:0.65rem; color:var(--text-dim); }
.book-header div:first-child { text-align:left; }
.book-header div:last-child { text-align:right; }
.book-levels { list-style:none; margin:0; padding:0; flex:1; overflow-y:auto; }
.order-book .asks { display:flex; flex-direction:column; justify-content:flex-end; }
.order-book .bids { display:flex; flex-direction:column; justify-content:flex-start; }
.level { position:relative; display:grid; grid-template-columns:1fr 1fr; padding:1px 4px; line-height:1.15; font-variant-numeric:tabular-nums; }
.level .price { text-align:left; }
.level .size { text-align:right; }
.level .bar { position:absolute; top:0; bottom:0; right:0; left:0; border-radius:2px; pointer-events:none; opacity:.18; }
.asks .level .bar { background:linear-gradient(90deg,var(--red) 0,rgba(255,255,255,0) 80%); }
.bids .level .bar { background:linear-gradient(90deg,var(--green) 0,rgba(255,255,255,0) 80%); }
.mid-price { text-align:center; padding:4px 0 5px; font-size:1.15rem; font-weight:600; color:var(--green); line-height:1; letter-spacing:.5px; }
/* depth legend removed per request */

.order-form { flex:1; min-width:54%; background:transparent; border:none; border-radius:0; padding:0 6px 4px; display:flex; flex-direction:column; gap:10px; font-size:0.75rem; }
.row.segmented { display:flex; gap:6px; }
.pill-select { flex:1; background:var(--bg-soft); border:1px solid var(--border); border-radius:30px; padding:6px 10px; color:var(--text-dim); font-size:0.7rem; }
.buy-sell-toggle { display:grid; grid-template-columns:1fr 1fr; background:var(--bg-soft); border-radius:12px; overflow:hidden; }
.side-btn { background:transparent; border:none; padding:8px 0; color:var(--text-dim); font-weight:500; cursor:pointer; font-size:0.8rem; }
.side-btn.active[data-side=buy] { background:var(--green); color:#fff; }
.side-btn.active[data-side=sell] { background:var(--red); color:#fff; }
.input-group { display:flex; flex-direction:column; gap:4px; }
.input-group label { font-size:0.65rem; color:var(--text-dim); text-transform:uppercase; letter-spacing:.5px; }
.number-input { display:flex; background:var(--bg-soft); border:1px solid var(--border); border-radius:10px; overflow:hidden; }
.number-input input { flex:1; background:transparent; border:none; padding:6px 6px; font-size:0.85rem; color:var(--text); text-align:center; font-variant-numeric:tabular-nums; }
.number-input input:focus { outline:none; }
.step-btn { width:40px; border:none; background:#dfe5ec; color:#475466; font-size:1rem; cursor:pointer; }
.step-btn:active { background:#ccd4dd; }
select#orderType { background:var(--bg-soft); border:1px solid var(--border); color:var(--text-dim); padding:6px 10px; border-radius:10px; font-size:0.75rem; }
input#quantitySlider { width:100%; accent-color:var(--green); }
.scale-percents { display:flex; justify-content:space-between; gap:4px; }
.pct { flex:1; background:var(--bg-soft); border:1px solid var(--border); color:var(--text-extra); font-size:0.65rem; padding:4px 0; border-radius:8px; cursor:pointer; }
.pct:active { background:#dfe4ea; }
.toggles { display:flex; gap:16px; font-size:0.65rem; color:var(--text-dim); }
.toggles input { accent-color:var(--green); }
.calc-line { display:flex; justify-content:space-between; font-size:0.66rem; color:var(--text-dim); }
.submit-order { margin-top:4px; background:var(--green); border:none; color:#fff; padding:12px 10px; border-radius:14px; font-size:0.9rem; font-weight:600; cursor:pointer; box-shadow:0 4px 12px -2px #16a34a55; }
.submit-order.sell { background:var(--red); box-shadow:0 4px 12px -2px #dc262655; }
.submit-order:active { transform:translateY(1px); }

.positions-panel { background:var(--bg-alt); border-radius:var(--radius); padding:4px 8px 56px; }
.tab-header { display:grid; grid-template-columns:1fr 1fr; border:1px solid var(--border); background:var(--bg-soft); border-radius:12px; overflow:hidden; }
.tab-btn { background:transparent; border:none; padding:8px 0; color:var(--text-extra); font-size:0.7rem; cursor:pointer; }
.tab-btn.active { background:#dfe5ec; color:var(--text); font-weight:500; }
.tab-content { font-size:0.7rem; min-height:42px; padding:10px 4px 4px; }
.tab-content.hidden { display:none; }
.empty { color:#555e6b; font-style:italic; }

.bottom-nav { position:absolute; bottom:0; left:0; right:0; height:58px; background:#ffffff; border-top:1px solid var(--border); display:grid; grid-template-columns:repeat(5,1fr); font-size:0.65rem; z-index:50; }
.nav-item { background:none; border:none; color:var(--text-extra); display:flex; flex-direction:column; align-items:center; justify-content:center; gap:2px; font-size:0.7rem; cursor:pointer; text-decoration:none; }
.nav-item.active { color:var(--green); font-weight:600; }

@media (max-width:650px) {
  body { padding:0; }
  .app-phone { height:100dvh; border-radius:0; box-shadow:none; }
  .device-notch { display:none; }
  .bottom-nav { height:56px; }
}
@media (max-width:520px) {
  .book-and-form { flex-direction:column; }
  .order-book, .order-form { min-width:100%; }
}

/* Animations */
.flash { animation:flash 0.6s ease; }
@keyframes flash { from { background:rgba(255,255,255,0.15); } to { background:transparent; } }
/* Floating price directional pulse (dot inside composite) */
.floating-price.flash-up .fp-dot { animation:priceUpPulse 0.6s ease; }
.floating-price.flash-down .fp-dot { animation:priceDownPulse 0.6s ease; }
@keyframes priceUpPulse { 0% { transform:scale(1.8); background:var(--green); box-shadow:0 0 0 2px rgba(22,163,74,0.55),0 0 10px 2px rgba(22,163,74,0.55); } 40% { transform:scale(1.15); background:rgba(22,163,74,0.4); box-shadow:0 0 0 3px rgba(22,163,74,0.35),0 0 4px 1px rgba(22,163,74,0.35); } 100% { transform:scale(1); background:#ffffff; box-shadow:0 0 0 2px rgba(111,106,222,0.25),0 0 6px -1px rgba(0,0,0,0.25); } }
@keyframes priceDownPulse { 0% { transform:scale(1.8); background:var(--red); box-shadow:0 0 0 2px rgba(220,38,38,0.55),0 0 10px 2px rgba(220,38,38,0.55); } 40% { transform:scale(1.15); background:rgba(220,38,38,0.4); box-shadow:0 0 0 3px rgba(220,38,38,0.35),0 0 4px 1px rgba(220,38,38,0.35); } 100% { transform:scale(1); background:#ffffff; box-shadow:0 0 0 2px rgba(111,106,222,0.25),0 0 6px -1px rgba(0,0,0,0.25); } }

/* Force desktop (framed phone) look even on small screens */
body.force-desktop { padding:24px 20px !important; }
body.force-desktop .app-phone { width:414px !important; max-width:100%; height:844px !important; border-radius:38px !important; box-shadow:0 20px 40px -12px rgba(31,45,61,.25),0 4px 12px rgba(0,0,0,.08) !important; }
body.force-desktop .device-notch { display:block !important; }
body.force-desktop .book-and-form { flex-direction:row !important; }
body.force-desktop .order-book { min-width:46% !important; }
body.force-desktop .order-form { min-width:54% !important; }
body.force-desktop .bottom-nav { height:58px !important; }

/* V2 full screen chart */
.fullchart-wrapper { position:relative; flex:1; width:100%; height:100%; display:flex; }
.fullchart-wrapper canvas { flex:1; width:100%; height:100%; display:block; }
.floating-price { position:absolute; top:8px; left:50%; transform:translateX(-50%); display:flex; align-items:center; gap:6px; font-size:0.95rem; font-weight:700; font-variant-numeric:tabular-nums; letter-spacing:.25px; color:#555e6b; }
.floating-price .fp-dot { width:14px; height:14px; border-radius:50%; background:#ffffff; border:2px solid #6F6ADE; box-shadow:0 0 0 2px rgba(111,106,222,0.25),0 0 6px -1px rgba(0,0,0,0.25); position:relative; }
.floating-price.flash-up .fp-dot { border-color:var(--green); }
.floating-price.flash-down .fp-dot { border-color:var(--red); }
.floating-price .fp-value { background:rgba(255,255,255,0.9); padding:4px 8px; border-radius:8px; box-shadow:0 2px 4px rgba(0,0,0,0.06); backdrop-filter:blur(2px); -webkit-backdrop-filter:blur(2px); }

/* Vertical Long / Short ratio bar (left edge, dynamically sized in JS) */
.long-short-vertical { position:absolute; left:10px; width:22px; display:flex; flex-direction:column; align-items:stretch; border-radius:14px; overflow:hidden; z-index:11; background:rgba(255,255,255,0.05); backdrop-filter:blur(4px); -webkit-backdrop-filter:blur(4px); border:none; box-shadow:none; font-size:0.48rem; font-weight:600; letter-spacing:.25px; pointer-events:none; transition:top .25s ease,height .25s ease,width .25s ease,left .25s ease; }
.long-short-vertical .ls-vert-seg { position:relative; flex:none; display:flex; align-items:center; padding:2px 0; color:#132e27; height:50%; transition:height .45s cubic-bezier(.4,.0,.2,1); font-variant-numeric:tabular-nums; }
.long-short-vertical .ls-vert-seg.short { justify-content:flex-start; padding-top:3px; }
.long-short-vertical .ls-vert-seg.long { justify-content:flex-end; padding-bottom:3px; }
.long-short-vertical .ls-vert-seg.short { background:linear-gradient(180deg, rgba(235,82,90,0.55) 0%, rgba(235,82,90,0.34) 100%); color:#6e2124; }
.long-short-vertical .ls-vert-seg.long { background:linear-gradient(180deg, rgba(33,176,135,0.58) 0%, rgba(33,176,135,0.36) 100%); color:#0a5b44; }
.long-short-vertical .ls-vert-separator { position:absolute; left:4px; right:4px; height:4px; transform:translateY(-50%) skewX(-18deg); background:#ffffffcc; border-radius:2px; box-shadow:0 0 0 1px rgba(0,0,0,0.04),0 0 2px rgba(0,0,0,0.05); z-index:3; pointer-events:none; transition:top .45s cubic-bezier(.4,.0,.2,1); }
.long-short-vertical .label { position:relative; z-index:3; writing-mode:vertical-rl; transform:rotate(180deg); text-align:center; }
.long-short-vertical .ls-vert-seg { position:relative; }
/* Override label positioning for precise top/bottom anchoring */
.long-short-vertical .ls-vert-seg .label { position:absolute; left:50%; transform:translateX(-50%) rotate(180deg); writing-mode:vertical-rl; margin:0; }
.long-short-vertical .ls-vert-seg.short .label { top:10px; }
.long-short-vertical .ls-vert-seg.long .label { bottom:10px; }
@media (max-height:700px){
  .long-short-vertical { width:24px; }
  .long-short-vertical .label { font-size:0.48rem; }
}

/* Stats bar above action buttons */
.trade-stats-bar { position:absolute; left:10px; right:10px; bottom:90px; display:grid; grid-template-columns:1fr 1fr; gap:10px; z-index:12; pointer-events:auto; }
.trade-stats-bar .stat-box { background:rgba(255,255,255,0.8); backdrop-filter:blur(1px) saturate(130%); -webkit-backdrop-filter:blur(4px) saturate(130%); border:1px solid rgba(255,255,255,0.65); border-radius:14px; padding:8px 12px 9px; display:flex; flex-direction:column; gap:4px; box-shadow:0 3px 10px -4px rgba(0,0,0,0.16),0 1px 3px rgba(0,0,0,0.05); }
.trade-stats-bar .stat-label { font-size:0.58rem; text-transform:uppercase; letter-spacing:.4px; font-weight:600; color:#5a6474; text-shadow:0 1px 1px rgba(255,255,255,0.4); }
.trade-stats-bar .stat-label-row { display:flex; align-items:center; justify-content:space-between; gap:6px; }
.trade-stats-bar .value-row { display:flex; align-items:center; justify-content:center; gap:10px; }
.trade-stats-bar .stat-value { font-size:0.95rem; font-weight:600; font-variant-numeric:tabular-nums; letter-spacing:.3px; color:var(--text); min-width:56px; text-align:center; }
.trade-stats-bar .adj, .trade-stats-bar .adj-btn { display:inline-flex; align-items:center; justify-content:center; width:26px; height:26px; border-radius:8px; background:rgba(226,230,235,0.9); color:#2f3a47; font-size:1rem; font-weight:600; line-height:1; border:none; cursor:default; user-select:none; backdrop-filter:blur(4px); }
.trade-stats-bar .adj-btn { cursor:pointer; transition:background .2s ease, transform .15s ease; }
.trade-stats-bar .adj-btn:active { transform:translateY(1px); }
.trade-stats-bar .adj-btn:hover { background:rgba(215,221,227,0.95); }
.trade-stats-bar .adj.disabled { opacity:.35; }
.trade-stats-bar .adj-btn.disabled, .trade-stats-bar .adj-btn:disabled { opacity:.35; cursor:default; pointer-events:none; }
.trade-stats-bar .auto-pill { font-size:0.52rem; letter-spacing:.5px; background:rgba(238,241,244,0.85); color:#596270; padding:3px 8px 3px; border-radius:10px; font-weight:600; white-space:nowrap; border:1px solid rgba(210,215,221,0.7); cursor:pointer; transition:background .25s ease,color .25s ease; pointer-events:auto; backdrop-filter:blur(4px); }
.trade-stats-bar .auto-pill.active { background:#21b087; color:#fff; border-color:#21b087; }
.trade-stats-bar .auto-pill:not(.active):hover { background:#e1e6ea; }
.trade-stats-bar .auto-pill.placeholder { visibility:hidden; }

/* Bottom action bar (Buy / Sell) */
.action-bar { position:absolute; left:10px; right:10px; bottom:12px; display:grid; grid-template-columns:1fr 1fr; gap:10px; z-index:12; pointer-events:auto; }
.action-btn { position:relative; overflow:hidden; border:none; border-radius:20px; height:60px; display:flex; align-items:center; justify-content:flex-start; padding:0 18px 0 64px; cursor:pointer; font-family:inherit; color:#ffffff; box-shadow:0 3px 8px -4px rgba(0,0,0,0.18),0 1px 3px rgba(0,0,0,0.08); transition:box-shadow .25s ease, transform .25s ease; }
.action-btn.buy { background:#21b087; }
.action-btn.sell { background:#d62d67; }
.action-btn:focus-visible { outline:2px solid var(--border); outline-offset:2px; }
.action-btn:hover { transform:translateY(-2px); box-shadow:0 8px 18px -10px rgba(0,0,0,0.35),0 2px 6px rgba(0,0,0,0.12); }
.action-btn:active { transform:translateY(0); box-shadow:0 4px 10px -4px rgba(0,0,0,0.25),0 1px 3px rgba(0,0,0,0.1); }
.action-btn .text-wrap { display:flex; flex-direction:column; align-items:flex-start; gap:0; position:relative; z-index:2; }
.action-btn .line.label { font-weight:700; font-size:0.9rem; letter-spacing:.4px; color:#ffffff; }
.action-btn .shape { position:absolute; top:50%; transform:translateY(-50%); left:8px; width:120px; height:120px; z-index:1; opacity:0.85; }
/* Arrow patterns */
.action-btn.buy .shape { background:#45c9a0; clip-path:polygon(50% 0, 100% 60%, 66% 60%, 66% 100%, 34% 100%, 34% 60%, 0 60%); }
.action-btn.sell .shape { background:#eb477f; clip-path:polygon(50% 100%, 100% 40%, 66% 40%, 66% 0, 34% 0, 34% 40%, 0 40%); }
.action-btn.sell .label { color:#ffffff; }
.action-btn.buy .label { color:#ffffff; }
.action-btn.buy { padding-left:64px; padding-right:18px; justify-content:flex-start; }
.action-btn.buy .shape { left:8px; right:auto; }
.action-btn.sell .shape { left:unset; right:8px; }
.action-bar .action-btn.buy { order:0; }
.action-bar .action-btn.sell { order:1; }

@media (max-width:520px){
  .action-btn { height:56px; padding:0 16px 0 56px; }
  .action-btn.buy { padding:0 56px 0 16px; }
  .action-btn .shape { width:128px; height:128px; }
  .action-btn .line.label { font-size:0.85rem; }
}

/* Chart overlay header (refined minimalist glass style) */
.chart-overlay { position:absolute; top:8px; left:0; right:0; display:flex; flex-direction:column; gap:10px; padding:0 10px; z-index:10; font-size:0.72rem; pointer-events:none; }
.chart-overlay .overlay-row { display:flex; justify-content:space-between; gap:8px; }
.chart-overlay .cell { flex:1; display:flex; flex-direction:column; gap:3px; background:linear-gradient(135deg,#6F6ADE 0%, #5a55c4 45%, #4d46b8 100%); border:1px solid rgba(255,255,255,0.15); border-radius:18px; padding:10px 14px 11px; box-shadow:0 4px 10px -4px rgba(79,74,190,0.55),0 2px 4px rgba(0,0,0,0.08); color:#fff; }
.chart-overlay .cell.cell-unified { background:transparent; border:none; box-shadow:none; color:inherit; }
.chart-overlay .cell-unified { flex-direction:row; align-items:stretch; padding:0; overflow:hidden; background:none; }
.chart-overlay .cell-unified .seg { flex:1; padding:10px 14px 11px; display:flex; flex-direction:column; gap:3px; position:relative; }
.chart-overlay .cell-unified .balance-seg { background:linear-gradient(135deg,#6F6ADE 0%, #5a55c4 60%, #4d46b8 100%); }
.chart-overlay .cell-unified .position-seg { background:linear-gradient(135deg,#f2f3f6 0%, #e6e8ed 100%); align-items:flex-end; text-align:right; }
.chart-overlay .cell-unified .position-seg .sub { color:#636c78; }
/* Ensure profit percent keeps dynamic green/red instead of inherited primary color */
.chart-overlay .cell-unified .position-seg .profit.positive { color:var(--green) !important; text-shadow:0 1px 2px rgba(0,0,0,0.15); }
.chart-overlay .cell-unified .position-seg .profit.negative { color:var(--red) !important; text-shadow:0 1px 2px rgba(0,0,0,0.15); }
.chart-overlay .cell-right, .chart-overlay .cell-left { backdrop-filter:none; -webkit-backdrop-filter:none; }
.chart-overlay .cell-right { align-items:flex-end; text-align:right; }
.chart-overlay .cell-left { align-items:flex-start; }
.chart-overlay .overlay-center { align-self:center; text-align:center; background:rgba(255,255,255,0.38); backdrop-filter:blur(4px) saturate(130%); -webkit-backdrop-filter:blur(4px) saturate(130%); padding:6px 18px 7px; border:1px solid rgba(255,255,255,0.65); border-radius:18px; box-shadow:0 3px 10px -4px rgba(0,0,0,0.16),0 1px 3px rgba(0,0,0,0.05); }
.chart-overlay .instrument { font-size:0.78rem; font-weight:600; letter-spacing:.4px; color:#222d38; text-shadow:0 1px 1px rgba(255,255,255,0.4); }
.chart-overlay .instrument-change { font-size:0.62rem; margin-top:4px; font-weight:600; letter-spacing:.4px; display:inline-flex; align-items:center; padding:4px 12px 5px; border-radius:999px; background:#f1f4f9; color:#222; box-shadow:0 1px 2px rgba(0,0,0,0.08); font-variant-numeric:tabular-nums; }
.chart-overlay .instrument-change.positive { background:#dcf5ec; color:#0b7a52; }
.chart-overlay .instrument-change.negative { background:#f9e0e0; color:#c23b2f; }
.chart-overlay .instrument-stats { margin-top:6px; display:flex; gap:10px; font-size:0.56rem; font-weight:500; letter-spacing:.35px; color:#4a5160; justify-content:center; flex-wrap:wrap; }
.chart-overlay .instrument-stats .label { text-transform:uppercase; color:#6b7382; font-weight:600; margin-right:2px; }
.chart-overlay .instrument-stats .divider { color:#c0c6ce; }
.chart-overlay .primary { font-weight:600; font-size:0.85rem; line-height:1.05; letter-spacing:.25px; color:#ffffff; text-shadow:0 1px 2px rgba(0,0,0,0.25); }
.chart-overlay .primary.balance { font-variant-numeric:tabular-nums; }
.chart-overlay .sub { font-size:0.58rem; letter-spacing:.4px; color:#d9dcff; text-transform:uppercase; font-weight:600; text-shadow:0 1px 1px rgba(0,0,0,0.25); }
.chart-overlay .profit { font-weight:600; }
.chart-overlay .profit.positive { color:#3ee6ab; }
.chart-overlay .profit.negative { color:#ff7b8d; }
.chart-overlay .caret { font-size:0.55rem; opacity:0.6; margin-left:2px; }
